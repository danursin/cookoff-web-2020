import{B as E}from"./axios.f9722dd0.js";import{r as n,Q as C,j as o,S as v,f as l,F as A,J as P,U as k}from"./index.85b6536d.js";import{C as t,h as u,a as B}from"./moment.3eddbaed.js";import{q as D,l as h}from"./lodash.ec14961c.js";const L=()=>{const[g,a]=n.exports.useState(!0),{userCookoffs:r,setUserCookoffs:m}=n.exports.useContext(C),{user:e}=n.exports.useContext(C);if(!e)throw new Error("User not defined in protected route");return n.exports.useEffect(()=>{if(r){a(!1);return}(async()=>{a(!0);const[f,s]=await Promise.all([D({table:"CookoffParticipant",relations:["Cookoff"],where:{ParticipantID:e.ParticipantID}}),e.IsAdmin?D({table:"Cookoff",where:{HostParticipantID:e.ParticipantID}}):void 0]),i=h.exports.orderBy(h.exports.uniqBy([...f.map(c=>c.Cookoff),...s||[]],"CookoffID"),["CookoffID"],["desc"]);m(i),a(!1)})()},[e,r,m]),!r||g?o(v,{message:"Loading cookoffs..."}):l(A,{children:[o(P,{icon:"spoon",content:"Your Cookoffs",color:"grey",size:"huge"}),e.IsAdmin&&o(E,{icon:"plus circle",color:"blue",fluid:!0,content:"Host a Cookoff",as:k,to:"/manage/new",style:{marginBottom:"1rem"}}),o(t.Group,{children:r.map(f=>{const{CookoffID:s,Title:i,EventStartDate:c,EventEndDate:x}=f,p=u(c.replace("Z","")),d=u(x.replace("Z","")),I=p.format("dddd, MMMM Do YYYY"),w=p.format("h:mm A"),y=d.format("h:mm A"),S=u(new Date).isAfter(d);return l(t,{fluid:!0,color:"grey",as:k,to:`/cookoff/${s}`,children:[l(t.Content,{children:[o(t.Header,{content:i}),o(t.Description,{content:I}),o(t.Meta,{content:`${w} to ${y}`})]}),!S&&o(t.Content,{children:o(B,{date:d.toDate()})})]},s)})})]})};export{L as default};
