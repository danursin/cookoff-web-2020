import{F as r,M as C}from"./Message.64e2fdfa.js";import{r as s,Q as b,aU as y,j as e,S,K as u,f as l,J as U,k as L,aV as v,H as d,aW as A,aX as j}from"./index.85b6536d.js";import{a as w}from"./axios.f9722dd0.js";const I=()=>{const[m,n]=s.exports.useState(!1),[g,i]=s.exports.useState(!1),[o,p]=s.exports.useState(""),{setUser:f}=s.exports.useContext(b),x=y(),h=async()=>{try{i(!1),n(!0);const t=`${d.cookoffApiUrl}/login`,{data:a}=await w.post(t,{Username:o},{withCredentials:!0}),c=a[d.accessTokenName],k=A(c);f(k),j(c),x("/dashboard")}catch(t){console.error(t),i(!0),n(!1)}};return m?e(S,{message:"Logging you in..."}):e(u,{centered:!0,padded:!0,children:l(u.Column,{mobile:16,computer:8,children:[e(U,{as:"h1",textAlign:"center",size:"huge",image:e(L,{src:v,size:"small"}),content:"Cookoff Pro"}),l(r,{onSubmit:h,children:[e(r.Input,{placeholder:"Username",icon:"user",iconPosition:"left",value:o,fluid:!0,onChange:(t,{value:a})=>p(a)}),e(r.Button,{color:"blue",icon:"sign in",type:"submit",fluid:!0,disabled:!o,content:"Login"}),g&&e(C,{negative:!0,icon:"exclamation triangle",content:"An error occurred. Check your username and try again"})]})]})})};export{I as default};
